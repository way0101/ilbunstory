(()=>{"use strict";var e,n={4781:(e,n,t)=>{t(4750),t(4994),t(8821),t(853),t(4845),t(5007),t(9275),t(6364),t(6632),t(1928),t(4883),t(8995);var o=t(6075),i=t(4418);function r(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=a((function e(n){var t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.moving=!1,n.gltfLoader.load(n.modelSrc,(function(e){e.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),t.modelMesh=e.scene.children[0],t.modelMesh.position.y=.3,t.modelMesh.name="ilbuni",n.scene.add(t.modelMesh),n.meshes.push(t.modelMesh),t.actions=[],t.mixer=new o.Xcj(t.modelMesh),t.actions[0]=t.mixer.clipAction(e.animations[0]),t.actions[1]=t.mixer.clipAction(e.animations[1]),t.actions[0].play()}))}));function d(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,n,t){return n&&d(e.prototype,n),t&&d(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var c=l((function e(n){var t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=n.x,this.y=n.y,this.z=n.z,this.visible=!1,n.gltfLoader.load(n.modelSrc,(function(e){t.modelMesh=e.scene.children[0],t.modelMesh.castShadow=!0,t.modelMesh.position.set(t.x,t.y,t.z),n.scene.add(t.modelMesh)}))})),h=t(5435);function u(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return p(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw r}}}}function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}var w=(new o.dpR).load("/images/grid.png");w.wrapS=o.rpg,w.wrapT=o.rpg,w.repeat.x=10,w.repeat.y=10;var f=document.querySelector("#three-canvas"),m=new o.CP7({canvas:f,antialias:!0});m.setSize(window.innerWidth,window.innerHeight),m.setPixelRatio(window.devicePixelRatio>1?2:1),m.shadowMap.enabled=!0,m.shadowMap.type=o.ntZ;var v=new o.xsS,y=new o.iKG(-window.innerWidth/window.innerHeight,window.innerWidth/window.innerHeight,1,-1,-1e3,1e3),b=new o.Pa4(1,5,5);y.position.set(b.x,b.y,b.z),y.zoom=.2,y.updateProjectionMatrix(),v.add(y);var g=new o.Mig("white",.7);v.add(g);var M=new o.Ox3("white",.5),x=new o.Pa4(1,1,1);M.position.x=x.x,M.position.y=x.y,M.position.z=x.z,M.castShadow=!0,M.shadow.mapSize.width=2048,M.shadow.mapSize.height=2048,M.shadow.camera.left=-100,M.shadow.camera.right=100,M.shadow.camera.top=100,M.shadow.camera.bottom=-100,M.shadow.camera.near=-100,M.shadow.camera.far=100,v.add(M);var z=[],j=new o.Kj0(new o._12(100,100),new o.Wid({map:w}));j.name="floor",j.rotation.x=-Math.PI/2,j.receiveShadow=!0,v.add(j),z.push(j);var S=new o.Kj0(new o._12(1,1),new o.vBJ({color:"crimson",transparent:!0,opacity:.5}));S.rotation.x=-Math.PI/2,S.position.y=.01,S.receiveShadow=!0,v.add(S);var P=new o.Kj0(new o._12(3,3),new o.Wid({color:"yellow",transparent:!0,opacity:.5}));P.position.set(5,.005,5),P.rotation.x=-Math.PI/2,P.receiveShadow=!0,v.add(P);var O=new i.E,E=new c({gltfLoader:O,scene:v,modelSrc:"/models/house.glb",x:5,y:-1.3,z:2}),L=new s({scene:v,meshes:z,gltfLoader:O,modelSrc:"/models/ilbuni.glb"}),A=new o.iMs,k=new o.FM8,W=new o.Pa4,C=0,H=!1,I=new o.SUY;function T(e){k.x=e.clientX/f.clientWidth*2-1,k.y=-(e.clientY/f.clientHeight*2-1)}window.addEventListener("resize",(function(){y.left=-window.innerWidth/window.innerHeight,y.right=window.innerWidth/window.innerHeight,y.top=1,y.bottom=-1,y.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight),m.render(v,y)})),f.addEventListener("mousedown",(function(e){H=!0,T(e)})),f.addEventListener("mouseup",(function(){H=!1})),f.addEventListener("mousemove",(function(e){H&&T(e)})),f.addEventListener("touchstart",(function(e){H=!0,T(e.touches[0])})),f.addEventListener("touchend",(function(){H=!1})),f.addEventListener("touchmove",(function(e){H&&T(e.touches[0])})),function e(){var n=I.getDelta();L.mixer&&L.mixer.update(n),L.modelMesh&&y.lookAt(L.modelMesh.position),L.modelMesh&&(H&&(A.setFromCamera(k,y),function(){var e,n=u(A.intersectObjects(z));try{for(n.s();!(e=n.n()).done;){var t=e.value;"floor"===t.object.name&&(W.x=t.point.x,W.y=.3,W.z=t.point.z,L.modelMesh.lookAt(W),L.moving=!0,S.position.x=W.x,S.position.z=W.z);break}}catch(e){n.e(e)}finally{n.f()}}()),L.moving?(C=Math.atan2(W.z-L.modelMesh.position.z,W.x-L.modelMesh.position.x),L.modelMesh.position.x+=.05*Math.cos(C),L.modelMesh.position.z+=.05*Math.sin(C),y.position.x=b.x+L.modelMesh.position.x,y.position.z=b.z+L.modelMesh.position.z,L.actions[0].stop(),L.actions[1].play(),Math.abs(W.x-L.modelMesh.position.x)<.03&&Math.abs(W.z-L.modelMesh.position.z)<.03&&(L.moving=!1),Math.abs(P.position.x-L.modelMesh.position.x)<1.5&&Math.abs(P.position.z-L.modelMesh.position.z)<1.5?E.visible||(E.visible=!0,P.material.color.set("seagreen"),h.ZP.to(E.modelMesh.position,{duration:1,y:1,ease:"Bounce.easeOut"}),h.ZP.to(y.position,{duration:1,y:3})):E.visible&&(E.visible=!1,P.material.color.set("yellow"),h.ZP.to(E.modelMesh.position,{duration:.5,y:-1.3}),h.ZP.to(y.position,{duration:1,y:5}))):(L.actions[1].stop(),L.actions[0].play())),m.render(v,y),m.setAnimationLoop(e)}()}},t={};function o(e){var i=t[e];if(void 0!==i)return i.exports;var r=t[e]={exports:{}};return n[e](r,r.exports,o),r.exports}o.m=n,e=[],o.O=(n,t,i,r)=>{if(!t){var a=1/0;for(c=0;c<e.length;c++){for(var[t,i,r]=e[c],s=!0,d=0;d<t.length;d++)(!1&r||a>=r)&&Object.keys(o.O).every((e=>o.O[e](t[d])))?t.splice(d--,1):(s=!1,r<a&&(a=r));if(s){e.splice(c--,1);var l=i();void 0!==l&&(n=l)}}return n}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[t,i,r]},o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={179:0};o.O.j=n=>0===e[n];var n=(n,t)=>{var i,r,[a,s,d]=t,l=0;if(a.some((n=>0!==e[n]))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(d)var c=d(o)}for(n&&n(t);l<a.length;l++)r=a[l],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(c)},t=self.webpackChunkthreejs_study=self.webpackChunkthreejs_study||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var i=o.O(void 0,[90],(()=>o(4781)));i=o.O(i)})();